<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Electron Hello World!</title>
    <script>
      const coap = require('coap')
      const bl = require('bl')

      const run = async (id, body) => {
        const request = coap.request({
          pathname: `/notes/${id}`,
          method: 'DELETE'
        })

        //request.write(JSON.stringify(body))

        return new Promise((resolve, reject) => {
          request.on('response', res => {
            console.log('response code', res.code)
            res.pipe(bl((error, data) => {
              if(error) {
                return reject(err)
              } 
              return resolve(JSON.parse(data))
            }))
          }).end()
        })
      }
      (async () => {
        const data = await run('5db9db7668aef980feeadfc9')
        console.log(data)
      })()
      
    </script>
  </head>
  <body>
    <h1>Electron Hello World!</h1>
    We are using node <script>document.write(process.versions.node)</script>,
    Chromium <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>.
  </body>
</html>